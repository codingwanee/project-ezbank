<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="reservationMapper">
	<resultMap type="reservationVO" id="reserveMap">
		<result column="RES_ID" property="resId" />
		<result column="RES_DATE" property="resDate"/>
		<result column="RES_TIME" property="resTime"/>
	</resultMap>
	
	<!-- 아직 처리되지 않은 지점 예약목록을 확인 -->
	<select id="selectAll" parameterType="String" resultType="reservationVO" resultMap="reserveMap">
		SELECT *
		FROM TB_RESERVATION
		WHERE RES_DATE = #{today} AND STATUS = '0'
	</select>	
	
	<!-- 로그인 한 직원의 근무지점에 따라 아직 처리되지 않은 지점 예약목록을 확인 -->
	<select id="selectByBranch" parameterType="reservationVO" resultType="reservationVO" resultMap="reserveMap">
		SELECT *
		FROM TB_RESERVATION
		WHERE RES_DATE = #{resDate} AND BRANCH = #{branch} AND STATUS = '0'
	</select>	
	
	<!-- 예약상태 변경(처리완료) -->
	<update id="updateStatus" parameterType="String">
		UPDATE FROM TB_RESERVATION
		SET STATUS = '1'
		WHERE RES_ID = #{resId}
	</update>
	
	<select id="test" parameterType="reservationVO" resultType="reservationVO" resultMap="reserveMap">
	
		SELECT *
		FROM TB_RESERVATION
		WHERE BRANCH = #{branch} AND res_date = #{resDate}
	
	</select>
	

</mapper>	